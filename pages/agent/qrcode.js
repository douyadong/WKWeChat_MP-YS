/*++----------------------------------------------------------------------------------------------------------------------------------------------------------------------
1. 项目名称：悟空找房+微信小程序
2. 文件名：pages -> agent -> qrcode.js
3. 作者：zhaohuagang@lifang.com
4. 备注：添加经纪人微信页面脚本逻辑
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
import request from "../../utils/request" ;
/*++----------------------------------------------------------------------------------------------------------------------------------------------------------------------
定义页面初始化参数
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
let params = {
     data : {
         "pageParams" : {} ,  //页面参数对象     
     } ,
     /*++----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    渲染页面方法
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
     render : function() {
          let  _ = this ;         
          request.fetch({
              "module": "agent" ,
              "action" : "getAgentInfo" ,              
              "mock" : false ,
              "data": {
                "agentId" :  _.data.pageParams.agentId
              } ,       
              success : function (res) {                 
                  _.setData(res.data) ;
              } ,
              fail : function() {
                  wx.showModal({ "title" : "错误提示" , "content" : res.message , "showCancel" : false , "confirmText" : "我知道了" }) ;
              }
          }) ;
     } ,
     /*++----------------------------------------------------------------------------------------------------------------------------------------------------------------------
    页面加载完触发
    -----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
     onLoad : function (options) {          
          //把页面参数保存到页面数据中
         this.setData({ "pageParams" : options }) ;
         this.render() ;   
    }
} ;
/*++----------------------------------------------------------------------------------------------------------------------------------------------------------------------
实例化页面
-----------------------------------------------------------------------------------------------------------------------------------------------------------------------++*/
Page(params) ;